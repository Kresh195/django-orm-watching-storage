# Пульт охраны банка

При помощи пульта охраны банка можно узнать список сотрудников, имеющих доступ к 
хранилищу, и информацию об их пропусках, историю их посещений хранилища, 
содержащую время и продолжительность их визита, а также является ли он 
подозрительным. Также есть возможность отслеживать кто находится в хранилище
в данный момент.


### Какие модели базы данных используются

В проекте используются 2 модели базы данных: `Passcard` и `Visit`.

В модели `Passcard` хранится информация о пропусках сотрудников банка, включающая:
флаг активности пропуска(может быть активной или неактивной); дата и время создания
пропуска; код пропуска и имя её владельца.

В модели `Visit` хранится информация о посещениях хранилища, включающая: дата и 
время 
создания записи о входе в хранилище; объект модели `Passcard` сотрудника, вошедшего
в хранилище; время входа в хранилище; время выхода из хранилища.

### Представления

`active_passcards_view` - отбирает из списка всех пропусков активные.

`passcard_info_view` - сортирует и заполняет историю посещений для каждого 
пользователя

`storage_information_view` - выводит активные посещения, включающие имя сотрудника,
время его посещения, а также является ли оно подозрительным.


### Как установить

1. Для копирования репозитория необходимо ввести в командную строку:  
     ```git clone https://github.com/Kresh195/django-orm-watching-storage```


2. Необходимо создать файл с названием `.env`, после чего ввести в него переменные
окружения базы данных(БД) по следующему шаблону:
   
`export название_переменной=значение_переменной`

Существуют следующие переменные окружения:

* `DB_ENGINE` - тип БД;
* `DB_HOST` - хост БД;
* `DB_PORT` - порт БД;pi
* `DB_NAME` - имя БД
* `DB_USER` - имя пользователя;
* `DB_USER_PASSWORD` - пароль пользователя;
* `DEBUG` - опциональный флаг, может иметь значения `true` или `false`. 
  Отвечает за включение режима дебага;
* `SECRET_KEY` - ключ шифрования паролей пользователей сайта;
* `ALLOWED_HOSTS` - список хостов сервера.
  

3. Python3 должен быть уже установлен. 
Затем используйте `pip` (или `pip3`, есть конфликт с Python2) для установки 
зависимостей:
```
pip install -r requirements.txt
```

Для локального запуска программы необходимо воспользоваться командой:
```
python manage.py runserver 127.0.0.1:8000
```
### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков 
[dvmn.org](https://dvmn.org/).